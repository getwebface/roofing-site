<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Leaflet CSS & JS for Map -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  
  <!-- Dynamic Metadata Slots (Edge-injected) -->
  <title data-slot="meta_title">Melbourne Roof Repairs | Expert Roofing Services | Free Inspection</title>
  <meta name="description" data-slot="meta_description" content="Professional roof repairs and restoration in Melbourne. Fast response, guaranteed workmanship, 20+ years experience. Free inspections available.">
  <meta property="og:title" data-slot="og_title" content="Melbourne Roof Repairs | Expert Roofing Services">
  <meta property="og:description" data-slot="og_description" content="Professional roof repairs and restoration in Melbourne. Fast response, guaranteed workmanship, 20+ years experience.">
  <meta property="og:image" data-slot="og_image" content="https://placehold.co/1200x630/007bff/ffffff?text=Melbourne+Roof+Repairs">
  
  <!-- JSON-LD Schema (Edge-injected) -->
  <script type="application/ld+json" data-slot="schema_json">
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "Melbourne Roof Repairs",
    "description": "Professional roof repairs and restoration in Melbourne",
    "url": "https://melbourneroofrepairs.com.au",
    "telephone": "0482022493"
  }
  </script>
  
  <!-- Styles -->
  <link rel="stylesheet" href="css/base.css">
  <link rel="stylesheet" href="css/themes.css">
  <link rel="stylesheet" href="css/sections.css">
</head>
<body>

  <!-- ===== BREADCRUMBS ===== -->
  <nav class="breadcrumbs" data-slot="breadcrumbs">
    <div class="container">
      <a href="/">Home</a> > <span data-slot="breadcrumb_current">Melbourne Roof Repairs</span>
    </div>
  </nav>

  <!-- ===== GLOBAL HEADER ===== -->
  <header class="site-header" data-section="nav" data-section-id="nav-001">
    <div class="header-container">
      <a href="#" class="header-logo" data-slot="logo_text">Melbourne Roof Repairs</a>
      
      <nav class="header-nav">
        <ul class="nav-links" id="navLinks">
          <li><a href="#services">Services</a></li>
          <li><a href="#areas">Areas</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
        
        <div class="header-cta">
          <a href="tel:0482022493" class="btn btn-primary smart-call-btn" id="headerCallBtn" data-goal="nav-call">
            <span class="btn-text" data-slot="header_phone_text">üìû Call Now - 24/7</span>
          </a>
        </div>
      </nav>
    </div>
  </header>

  <!-- ===== HORIZONTAL SCROLL CHIPS ===== -->
  <div class="section-chips">
    <div class="chips-container">
      <a href="#services" class="chip" data-section="services">Services</a>
      <a href="#areas" class="chip" data-section="areas">Areas</a>
      <a href="#about" class="chip" data-section="about">About</a>
      <a href="#faq" class="chip" data-section="faq">FAQ</a>
      <a href="#final-cta" class="chip" data-section="final-cta">Get Quote</a>
    </div>
  </div>

  <!-- ===== HERO LEAD WEATHER ===== -->
  <section class="hero" data-section="hero-lead-weather" data-section-id="hero-universal-001" data-theme="themeA">
    <div class="container">
      <!-- Weather Badge -->
      <div class="wx-badge" data-slot="wx_banner_text" data-mode="calm">
        <span class="wx-badge-icon">‚òÄÔ∏è</span>
        <span>Perfect weather for roof inspections in Melbourne</span>
      </div>
      
      <div class="hero-content">
        <h1 data-slot="headline">Professional Roof Repairs & Restoration in Melbourne</h1>
        <p data-slot="body">Fast response, guaranteed workmanship, 20+ years experience. From leak detection to complete re-bedding, we fix it right the first time. Fully insured with 10-year warranty.</p>
        
        <div class="hero-cta-group">
          <a href="#lead_form_mount" class="btn btn-primary btn-large smart-call-btn" data-slot="cta_primary_text" data-goal="cta-hero-primary">
            <span class="btn-text">Get Your Free Quote</span>
          </a>
          <a href="#services" class="btn btn-secondary btn-large" data-slot="cta_secondary_text" data-goal="cta-hero-secondary">
            See Our Services
          </a>
        </div>
        
        <p class="hero-microcopy" data-slot="microcopy">
          ‚úì Same-day emergency response available
        </p>
        
        <!-- Form Mount Point -->
        <div class="lead-form-mount" data-slot="lead_form_mount" data-form-key="lead_default"></div>
      </div>
    </div>
  </section>

  <!-- ===== TRUST STRIP ===== -->
  <section class="trust-strip" data-section="trust-strip" data-section-id="trust-universal-001">
    <div class="container">
      <div class="trust-badges">
        <div class="trust-badge" data-slot="proof_badge_1">
          <div class="trust-badge-icon">20</div>
          <div class="trust-badge-text">Years Experience</div>
          <div class="trust-badge-subtext">Since 2004</div>
        </div>
        <div class="trust-badge" data-slot="proof_badge_2">
          <div class="trust-badge-icon">‚úì</div>
          <div class="trust-badge-text">Fully Insured</div>
          <div class="trust-badge-subtext">$20M Coverage</div>
        </div>
        <div class="trust-badge" data-slot="proof_badge_3">
          <div class="trust-badge-icon">‚≠ê</div>
          <div class="trust-badge-text">5-Star Rated</div>
          <div class="trust-badge-subtext">200+ Reviews</div>
        </div>
        <div class="trust-badge" data-slot="proof_badge_4">
          <div class="trust-badge-icon">10</div>
          <div class="trust-badge-text">Year Warranty</div>
          <div class="trust-badge-subtext">On All Work</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== PROBLEM SYMPTOMS ===== -->
  <section class="problem-symptoms" data-section="problem-symptoms" data-section-id="symptoms-universal-001">
    <div class="container">
      <h2 data-slot="symptoms_headline">Common Roofing Problems We Fix</h2>
      
      <div class="symptoms-grid">
        <div class="symptom-card" data-slot="symptom_1">
          <div class="symptom-icon">üíß</div>
          <h3 class="symptom-title">Active Leaks</h3>
          <p class="symptom-description">Water stains, damp patches, or dripping water indicate urgent roof damage requiring immediate attention.</p>
        </div>
        
        <div class="symptom-card" data-slot="symptom_2">
          <div class="symptom-icon">üî®</div>
          <h3 class="symptom-title">Broken Tiles</h3>
          <p class="symptom-description">Cracked or missing tiles expose your roof structure to weather damage and water penetration.</p>
        </div>
        
        <div class="symptom-card" data-slot="symptom_3">
          <div class="symptom-icon">üåø</div>
          <h3 class="symptom-title">Deteriorated Mortar</h3>
          <p class="symptom-description">Old pointing and bedding allows tiles to shift and water to enter your roof cavity.</p>
        </div>
        
        <div class="symptom-card" data-slot="symptom_4">
          <div class="symptom-icon">‚ö°</div>
          <h3 class="symptom-title">Rusted Valleys</h3>
          <p class="symptom-description">Corroded valley irons are a primary leak source in Melbourne's older tile roofs.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== GRID CARDS (SERVICES) - HIDDEN ON SERVICE PAGES ===== -->
  <section class="grid-cards" data-section="grid-cards" data-section-id="services-universal-001" data-bg="alt" id="services" style="display: none;">
    <div class="container">
      <h2 data-slot="services_headline">Our Services</h2>
      
      <div class="cards-grid">
        <a href="services/leak-repair" class="card" data-slot="card_1" data-goal="service-card-leak">
          <div class="card-icon">üîß</div>
          <h3 class="card-title">Leak Repair</h3>
          <p class="card-description">Fast diagnosis and permanent leak fixes. We find the source and repair it properly, with warranty.</p>
          <span class="card-link">Learn more ‚Üí</span>
        </a>
        
        <a href="services/restoration" class="card" data-slot="card_2" data-goal="service-card-restoration">
          <div class="card-icon">‚ú®</div>
          <h3 class="card-title">Roof Restoration</h3>
          <p class="card-description">Complete roof renewal including cleaning, repairs, and protective coating for extended life.</p>
          <span class="card-link">Learn more ‚Üí</span>
        </a>
        
        <a href="services/rebedding" class="card" data-slot="card_3" data-goal="service-card-rebedding">
          <div class="card-icon">üß±</div>
          <h3 class="card-title">Re-bedding & Pointing</h3>
          <p class="card-description">Replace deteriorated mortar to secure tiles and prevent water penetration.</p>
          <span class="card-link">Learn more ‚Üí</span>
        </a>
        
        <a href="services/valley-repair" class="card" data-slot="card_4" data-goal="service-card-valley">
          <div class="card-icon">‚öôÔ∏è</div>
          <h3 class="card-title">Valley Repair</h3>
          <p class="card-description">Replace rusted valley irons with modern materials. Stop leaks at vulnerable points.</p>
          <span class="card-link">Learn more ‚Üí</span>
        </a>
      </div>
    </div>
  </section>

  <!-- ===== LONG-FORM CONTENT ===== -->
  <section class="long-content" data-section="long-content" data-section-id="content-universal-001" id="about">
    <div class="container">
      <h2 data-slot="long_headline">Why Choose Professional Roof Repairs?</h2>
      <div data-slot="long_body_1" data-slot-type="rich">
        <p>Your roof is your home's first line of defense against Melbourne's unpredictable weather. From scorching summer heat to winter storms, your roof takes a beating year-round. <strong>Professional roof repairs</strong> aren't just about fixing visible damage‚Äîthey're about protecting your investment and ensuring your family's safety.</p>
        <p>At TrueRoof, we've spent over 20 years perfecting our craft. We understand the unique challenges of Melbourne roofing, from terracotta tiles that crack in extreme heat to valley irons that rust in our humid climate. Our team doesn't just patch problems‚Äîwe diagnose root causes and provide lasting solutions.</p>
      </div>
    </div>
  </section>

  <!-- ===== PROCESS STEPS (SERVICE PAGES ONLY) ===== -->
  <section class="process-steps" data-section="process-steps" data-section-id="process-universal-001" style="display: none;">
    <div class="container">
      <h2 data-slot="process_headline">Our Service Process</h2>
      
      <div class="steps-list">
        <div class="step" data-slot="step_1">
          <div class="step-number">1</div>
          <div class="step-content">
            <h3 class="step-title">Free Inspection</h3>
            <p class="step-description">We visit your property, thoroughly assess the damage, and provide a detailed quote. No obligation, no hidden fees.</p>
          </div>
        </div>
        
        <div class="step" data-slot="step_2">
          <div class="step-number">2</div>
          <div class="step-content">
            <h3 class="step-title">Clear Quote</h3>
            <p class="step-description">Transparent pricing with itemized breakdown. You'll know exactly what you're paying for before we start.</p>
          </div>
        </div>
        
        <div class="step" data-slot="step_3">
          <div class="step-number">3</div>
          <div class="step-content">
            <h3 class="step-title">Expert Repairs</h3>
            <p class="step-description">Our experienced team completes the work efficiently using quality materials. We clean up thoroughly when done.</p>
          </div>
        </div>
        
        <div class="step" data-slot="step_4">
          <div class="step-number">4</div>
          <div class="step-content">
            <h3 class="step-title">10-Year Warranty</h3>
            <p class="step-description">All work is backed by our comprehensive warranty. If there's an issue, we'll fix it at no cost.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== BEFORE/AFTER GALLERY (SERVICE PAGES ONLY) ===== -->
  <section class="before-after-section" data-section="before-after" data-section-id="gallery-universal-001" style="display: none;">
    <div class="container">
      <h2 data-slot="gallery_headline">Real Results from Recent Projects</h2>
      
      <div class="before-after-grid">
        <div class="before-after-item">
          <div class="before-after-images">
            <div class="before-after-image-wrapper">
              <img data-slot="before_image_1" data-slot-type="image" src="https://placehold.co/400x400/e5e7eb/64748b?text=Before" alt="Before repair">
              <span class="before-after-label before">Before</span>
            </div>
            <div class="before-after-image-wrapper">
              <img data-slot="after_image_1" data-slot-type="image" src="https://placehold.co/400x400/e5e7eb/10b981?text=After" alt="After repair">
              <span class="before-after-label after">After</span>
            </div>
          </div>
          <div class="before-after-caption" data-slot="gallery_1">Complete roof restoration in Brunswick - tiles cleaned, re-bedded, and sealed</div>
        </div>
        
        <div class="before-after-item">
          <div class="before-after-images">
            <div class="before-after-image-wrapper">
              <img data-slot="before_image_2" data-slot-type="image" src="https://placehold.co/400x400/e5e7eb/64748b?text=Before" alt="Before repair">
              <span class="before-after-label before">Before</span>
            </div>
            <div class="before-after-image-wrapper">
              <img data-slot="after_image_2" data-slot-type="image" src="https://placehold.co/400x400/e5e7eb/10b981?text=After" alt="After repair">
              <span class="before-after-label after">After</span>
            </div>
          </div>
          <div class="before-after-caption" data-slot="gallery_2">Valley iron replacement - eliminated persistent leak issues</div>
        </div>
        
        <div class="before-after-item">
          <div class="before-after-images">
            <div class="before-after-image-wrapper">
              <img data-slot="before_image_3" data-slot-type="image" src="https://placehold.co/400x400/e5e7eb/64748b?text=Before" alt="Before repair">
              <span class="before-after-label before">Before</span>
            </div>
            <div class="before-after-image-wrapper">
              <img data-slot="after_image_3" data-slot-type="image" src="https://placehold.co/400x400/e5e7eb/10b981?text=After" alt="After repair">
              <span class="before-after-label after">After</span>
            </div>
          </div>
          <div class="before-after-caption" data-slot="gallery_3">Emergency storm damage repair - completed within 48 hours</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== IMAGE GALLERY (LOCAL PAGES ONLY) ===== -->
  <section class="image-gallery" data-section="image-gallery" data-section-id="gallery-local-universal-001" style="display: none;">
    <div class="container">
      <h2 data-slot="gallery_headline">Recent Projects in Your Area</h2>
      
      <div class="gallery-grid-images">
        <div class="gallery-image-item" data-slot="gallery_image_1" data-slot-type="image">
          <img src="https://placehold.co/600x450/e5e7eb/64748b?text=Project+1" alt="Recent roofing project" loading="lazy">
        </div>
        <div class="gallery-image-item" data-slot="gallery_image_2" data-slot-type="image">
          <img src="https://placehold.co/600x450/e5e7eb/64748b?text=Project+2" alt="Recent roofing project" loading="lazy">
        </div>
        <div class="gallery-image-item" data-slot="gallery_image_3" data-slot-type="image">
          <img src="https://placehold.co/600x450/e5e7eb/64748b?text=Project+3" alt="Recent roofing project" loading="lazy">
        </div>
        <div class="gallery-image-item" data-slot="gallery_image_4" data-slot-type="image">
          <img src="https://placehold.co/600x450/e5e7eb/64748b?text=Project+4" alt="Recent roofing project" loading="lazy">
        </div>
        <div class="gallery-image-item" data-slot="gallery_image_5" data-slot-type="image">
          <img src="https://placehold.co/600x450/e5e7eb/64748b?text=Project+5" alt="Recent roofing project" loading="lazy">
        </div>
        <div class="gallery-image-item" data-slot="gallery_image_6" data-slot-type="image">
          <img src="https://placehold.co/600x450/e5e7eb/64748b?text=Project+6" alt="Recent roofing project" loading="lazy">
        </div>
      </div>
    </div>
  </section>

  <!-- ===== BENEFITS GRID (HOME ONLY) ===== -->
  <section class="benefits-grid" data-section="benefits-grid" data-section-id="benefits-universal-001" style="display: none;">
    <div class="container">
      <h2 data-slot="headline">What Sets Us Apart</h2>
      <div data-slot="benefit_list" data-slot-type="json-list">
        <!-- JSON array will be rendered here -->
        <ul class="benefit-list">
          <li>24-hour emergency response for urgent repairs</li>
          <li>10-year workmanship warranty on all projects</li>
          <li>Fully licensed and insured with $20M coverage</li>
          <li>Free, no-obligation roof inspections</li>
          <li>Transparent pricing with detailed quotes</li>
          <li>Eco-friendly materials and practices</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- ===== SOCIAL PROOF BAR (HOME ONLY) ===== -->
  <section class="social-proof-bar" data-section="social-proof" data-section-id="proof-universal-001" style="display: none;">
    <div class="container">
      <div class="social-proof-stats">
        <div class="social-proof-stat">
          <div class="social-proof-number" data-slot="social_proof_stat">500+</div>
          <div class="social-proof-label">Roofs Repaired</div>
        </div>
        <div class="social-proof-stat">
          <div class="social-proof-number">20</div>
          <div class="social-proof-label">Years Experience</div>
        </div>
        <div class="social-proof-stat">
          <div class="social-proof-number">98%</div>
          <div class="social-proof-label">Customer Satisfaction</div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== TESTIMONIALS (SERVICE PAGES ONLY) ===== -->
  <section class="proof-testimonials" data-section="proof-testimonials" data-section-id="testimonials-universal-001" style="display: none;">
    <div class="container">
      <h2 data-slot="testimonials_headline">What Our Customers Say</h2>
      
      <div class="testimonials-grid">
        <div class="testimonial" data-slot="testimonial_1">
          <p class="testimonial-quote" data-slot="testimonial_1_quote">Quick response after storm damage. They had our roof watertight within 24 hours and completed the full repair the following week. Professional and reliable.</p>
          <div class="testimonial-author">
            <div class="testimonial-avatar" data-slot="testimonial_1_avatar">MJ</div>
            <div>
              <div class="testimonial-name" data-slot="testimonial_1_name">Michael Johnson</div>
              <div class="testimonial-location" data-slot="testimonial_1_location">Brunswick</div>
            </div>
          </div>
        </div>
        
        <div class="testimonial" data-slot="testimonial_2">
          <p class="testimonial-quote" data-slot="testimonial_2_quote">Honest assessment and fair pricing. They could have sold us a full restoration but recommended targeted repairs instead. Saved us thousands.</p>
          <div class="testimonial-author">
            <div class="testimonial-avatar" data-slot="testimonial_2_avatar">SC</div>
            <div>
              <div class="testimonial-name" data-slot="testimonial_2_name">Sarah Chen</div>
              <div class="testimonial-location" data-slot="testimonial_2_location">Coburg</div>
            </div>
          </div>
        </div>
        
        <div class="testimonial" data-slot="testimonial_3">
          <p class="testimonial-quote" data-slot="testimonial_3_quote">The team was punctual, tidy, and thorough. They explained everything clearly and the workmanship is excellent. Highly recommend.</p>
          <div class="testimonial-author">
            <div class="testimonial-avatar" data-slot="testimonial_3_avatar">DP</div>
            <div>
              <div class="testimonial-name" data-slot="testimonial_3_name">David Patel</div>
              <div class="testimonial-location" data-slot="testimonial_3_location">Preston</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== MAP & AREAS LIST (LOCAL + HOME) ===== -->
  <!-- Map (Local Pages Only) -->
  <section class="local-map-section" data-section="local-map" data-section-id="map-universal-001" style="display: none;">
    <div class="container">
      <h2 data-slot="map_headline">Service Area Map</h2>
      <div id="map-container" style="height: 400px; width: 100%; border-radius: 8px; margin-top: 20px;"></div>
    </div>
  </section>

  <!-- Areas List (Home + Local Pages) -->
  <section class="service-areas-list" data-section="service-areas" data-section-id="areas-universal-001" style="display: none;">
    <div class="container">
      <h2 data-slot="areas_headline">We Service These Areas</h2>
      <div class="areas-list">
        <div class="area-item" data-slot="area_1">Brunswick</div>
        <div class="area-item" data-slot="area_2">Coburg</div>
        <div class="area-item" data-slot="area_3">Preston</div>
        <div class="area-item" data-slot="area_4">Northcote</div>
        <div class="area-item" data-slot="area_5">Thornbury</div>
        <div class="area-item" data-slot="area_6">Reservoir</div>
        <div class="area-item" data-slot="area_7">Fitzroy</div>
        <div class="area-item" data-slot="area_8">Collingwood</div>
        <div class="area-item" data-slot="area_9">Carlton</div>
        <div class="area-item" data-slot="area_10">Kensington</div>
        <div class="area-item" data-slot="area_11">Ascot Vale</div>
        <div class="area-item" data-slot="area_12">Moonee Ponds</div>
      </div>
    </div>
  </section>

  <!-- ===== FAQ ACCORDION ===== -->
  <section class="faq-accordion" data-section="faq-accordion" data-section-id="faq-universal-001" id="faq">
    <div class="container">
      <h2 data-slot="faq_headline">Frequently Asked Questions</h2>
      
      <div class="faq-list">
        <div class="faq-item" data-slot="faq_1" data-open="false">
          <button class="faq-question" aria-expanded="false">
            <span>How quickly can you respond?</span>
            <span class="faq-icon">‚ñº</span>
          </button>
          <div class="faq-answer">
            <p>We offer same-day emergency response for active leaks. We'll make your roof watertight immediately, then schedule permanent repairs within 3-5 days.</p>
          </div>
        </div>
        
        <div class="faq-item" data-slot="faq_2" data-open="false">
          <button class="faq-question" aria-expanded="false">
            <span>Do you provide warranties?</span>
            <span class="faq-icon">‚ñº</span>
          </button>
          <div class="faq-answer">
            <p>Yes, all our work comes with a 10-year workmanship warranty. Materials carry manufacturer warranties ranging from 10-25 years.</p>
          </div>
        </div>
        
        <div class="faq-item" data-slot="faq_3" data-open="false">
          <button class="faq-question" aria-expanded="false">
            <span>Are you licensed and insured?</span>
            <span class="faq-icon">‚ñº</span>
          </button>
          <div class="faq-answer">
            <p>Absolutely. We're fully licensed roofing contractors with $20 million public liability insurance and WorkCover for all team members.</p>
          </div>
        </div>
        
        <div class="faq-item" data-slot="faq_4" data-open="false">
          <button class="faq-question" aria-expanded="false">
            <span>Do you offer free inspections?</span>
            <span class="faq-icon">‚ñº</span>
          </button>
          <div class="faq-answer">
            <p>Yes! We provide free, no-obligation roof inspections and detailed quotes. Contact us to schedule your inspection.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== FINAL CTA ===== -->
  <section class="final-cta" data-section="final-cta" data-section-id="cta-final-universal-001" id="contact">
    <div class="container">
      <h2 data-slot="cta_headline">Ready to Fix Your Roof?</h2>
      <p data-slot="cta_body">Get a free, no-obligation inspection and quote. We'll assess your roof and provide honest recommendations.</p>
      
      <div class="final-cta-actions">
        <a href="#lead_form_mount" class="btn btn-primary btn-large smart-call-btn" data-slot="cta_primary_text" data-goal="cta-final-primary">
          <span class="btn-text">Get Free Quote Today</span>
        </a>
        <a href="tel:0482022493" class="btn btn-secondary btn-large" data-slot="cta_secondary_text" data-goal="cta-final-secondary">
          Emergency? Call Now
        </a>
      </div>
      
      <a href="tel:0482022493" class="final-cta-phone" data-slot="phone_number">
        üìû 0482 022 493
      </a>
    </div>
  </section>

  <!-- ===== GLOBAL FOOTER ===== -->
  <footer class="site-footer" data-section="footer" data-section-id="footer-001">
    <div class="footer-container">
      <div class="footer-grid">
        <div class="footer-column">
          <h3>Melbourne Roof Repairs</h3>
          <p>Professional roof repairs and restoration in Melbourne. Fast response, guaranteed workmanship, 20+ years experience. Free inspections available.</p>
        </div>
        
        <div class="footer-column">
          <h3>Services</h3>
          <ul>
            <li><a href="#services">Our Services</a></li>
            <li><a href="#areas">Service Areas</a></li>
            <li><a href="#about">About Us</a></li>
            <li><a href="#contact">Contact</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h3>Why Choose Us</h3>
          <ul>
            <li>20+ Years Experience</li>
            <li>Fully Insured</li>
            <li>10-Year Warranty</li>
            <li>Free Inspections</li>
          </ul>
        </div>
        
        <div class="footer-column footer-contact">
          <h3>Contact</h3>
          <p><strong>Phone:</strong> <a href="tel:0482022493" data-goal="footer-call">0482 022 493</a></p>
          <p><strong>Email:</strong> <a href="mailto:info@melbourneroofrepairs.com.au">info@melbourneroofrepairs.com.au</a></p>
          <p><strong>Hours:</strong> Mon-Fri 9am-5pm AEST</p>
          <p><strong>Emergency:</strong> 24/7 Available</p>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; 2026 Melbourne Roof Repairs. All rights reserved. | Licensed & Insured</p>
      </div>
    </div>
  </footer>

  <!-- Sticky Bottom Action Bar -->
  <div class="sticky-action-bar">
    <a href="#lead_form_mount" class="btn btn-primary btn-sticky-primary" onclick="scrollToForm(event)">Get Free Quote</a>
    <a href="tel:0482022493" class="btn btn-secondary btn-sticky-secondary">üìû Call Now</a>
  </div>

  <!-- Scripts -->
  <script src="/js/tracker.js"></script>
  <script type="module" src="js/init.js"></script>
  
  <!-- Smooth Scroll to Form Function -->
  <script>
    function scrollToForm(event) {
      event.preventDefault();
      const formElement = document.querySelector('[data-slot="lead_form_mount"]');
      if (formElement) {
        formElement.scrollIntoView({
          behavior: 'smooth',
          block: 'center'
        });
        // Add a subtle highlight effect
        formElement.style.transition = 'box-shadow 0.3s ease';
        formElement.style.boxShadow = '0 0 0 4px rgba(216, 67, 21, 0.3)';
        setTimeout(() => {
          formElement.style.boxShadow = '';
        }, 1500);
      }
    }
    
    // Apply to all quote buttons
    document.addEventListener('DOMContentLoaded', function() {
      const quoteButtons = document.querySelectorAll('a[href="#lead_form_mount"]');
      quoteButtons.forEach(button => {
        button.addEventListener('click', scrollToForm);
      });
    });
  </script>
  
  <!-- FAQ Accordion Interaction -->
  <script>
    document.querySelectorAll('.faq-question').forEach(button => {
      button.addEventListener('click', () => {
        const item = button.closest('.faq-item');
        const isOpen = item.getAttribute('data-open') === 'true';
        
        // Close all other items
        document.querySelectorAll('.faq-item').forEach(otherItem => {
          if (otherItem!== item) {
            otherItem.setAttribute('data-open', 'false');
            otherItem.querySelector('.faq-question').setAttribute('aria-expanded', 'false');
          }
        });
        
        // Toggle current item
        item.setAttribute('data-open', !isOpen);
        button.setAttribute('aria-expanded', !isOpen);
      });
    });
  </script>

  <!-- Section Chips Scroll Highlighting -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const sectionChips = document.querySelector('.section-chips');
      const chips = document.querySelectorAll('.chip');
      const sections = {
        'services': document.getElementById('services'),
        'areas': document.getElementById('areas'),
        'about': document.getElementById('about'),
        'contact': document.getElementById('contact'),
        'faq': document.getElementById('faq'),
        'final-cta': document.querySelector('.final-cta')
      };
      
      // Make chips sticky when scrolling past hero
      const heroSection = document.querySelector('.hero');
      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach(entry => {
            if (!entry.isIntersecting) {
              sectionChips.classList.add('sticky-active');
            } else {
              sectionChips.classList.remove('sticky-active');
            }
          });
        },
        { threshold: 0.1 }
      );
      
      if (heroSection) {
        observer.observe(heroSection);
      }
      
      // Highlight active chip based on scroll position
      function highlightActiveChip() {
        let currentSection = null;
        let closestDistance = Infinity;
        
        // Find which section is currently in view
        Object.entries(sections).forEach(([id, section]) => {
          if (section) {
            const rect = section.getBoundingClientRect();
            const distanceFromTop = Math.abs(rect.top);
            
            // If section is in viewport (top is between 0 and window height)
            if (rect.top <= window.innerHeight * 0.3 && rect.bottom >= window.innerHeight * 0.3) {
              if (distanceFromTop < closestDistance) {
                closestDistance = distanceFromTop;
                currentSection = id;
              }
            }
          }
        });
        
        // Update chip states
        chips.forEach(chip => {
          chip.classList.remove('active');
          if (chip.getAttribute('data-section') === currentSection) {
            chip.classList.add('active');
          }
        });
      }
      
      // Smooth scroll for chips
      chips.forEach(chip => {
        chip.addEventListener('click', (e) => {
          e.preventDefault();
          const targetId = chip.getAttribute('data-section');
          const targetSection = sections[targetId];
          
          if (targetSection) {
            targetSection.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
          }
        });
      });
      
      // Update on scroll
      window.addEventListener('scroll', highlightActiveChip);
      highlightActiveChip(); // Initial call
    });
  </script>

  <!-- ===== CLIENT-SIDE MAP & A/B LOGIC ===== -->
  <script>
    // Leaflet Map Initialization (only on Local pages)
    function initMap() {
      const mapContainer = document.getElementById('map-container');
      if (!mapContainer || !window.L) return;
      
      // Get slug from initial data
      const initialData = document.getElementById('__INITIAL_DATA__');
      if (!initialData) return;
      
      const data = JSON.parse(initialData.textContent);
      const slug = data.slug;
      
      if (!slug || data.actualPageType !== 'local') return;
      
      // Geocode slug using Nominatim (free OSM)
      const suburbName = slug.charAt(0).toUpperCase() + slug.slice(1);
      const query = `${suburbName}, Melbourne, Australia`;
      
      fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(query)}`)
        .then(res => res.json())
        .then(results => {
          if (results && results.length > 0) {
            const lat = parseFloat(results[0].lat);
            const lon = parseFloat(results[0].lon);
            
            // Initialize map
            const map = L.map('map-container').setView([lat, lon], 13);
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
              attribution: '¬© OpenStreetMap contributors'
            }).addTo(map);
            
            // Add marker
            L.marker([lat, lon]).addTo(map)
              .bindPopup(`<b>${suburbName}</b><br>Melbourne Roof Repairs`)
              .openPopup();
          }
        })
        .catch(err => {
          console.warn('Map geocoding failed:', err);
          // Fallback: Center on Melbourne CBD
          const map = L.map('map-container').setView([-37.8136, 144.9631], 12);
          L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        });
    }

    // A/B Testing Client-Side Hydration
    function initABTesting() {
      const initialData = document.getElementById('__INITIAL_DATA__');
      if (!initialData) return;
      
      const data = JSON.parse(initialData.textContent);
      const urlParams = new URLSearchParams(window.location.search);
      const variant = urlParams.get('v') || getCookie('ab_variant');
      
      if (variant === 'B' && data.copy) {
        // Swap variants
        Object.keys(data.copy).forEach(key => {
          const variantKey = `${key}_variantB`;
          if (data.copy[variantKey]) {
            // Find element and swap content
            const elements = document.querySelectorAll(`[data-slot="${key}"]`);
            elements.forEach(el => {
              const tag = el.tagName.toLowerCase();
              if (tag === 'img') {
                el.setAttribute('src', data.copy[variantKey]);
              } else if (tag === 'a') {
                el.setAttribute('href', data.copy[variantKey]);
              } else {
                el.textContent = data.copy[variantKey];
              }
            });
          }
        });
      }
    }

    // Helper functions
    function getCookie(name) {
      const value = `; ${document.cookie}`;
      const parts = value.split(`; ${name}=`);
      if (parts.length === 2) return parts.pop().split(';').shift();
      return null;
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', () => {
      initMap();
      initABTesting();
    });
  </script>
</body>
</html>
